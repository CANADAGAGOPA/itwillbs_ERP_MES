<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itwillbs.factron.mapper.work.WorkMapper">

    <!-- 근무 목록 조회 -->
    <select id="getWorkList" parameterType="com.itwillbs.factron.dto.work.RequestWork" resultType="com.itwillbs.factron.dto.work.ResponseWork">
        SELECT
            t1.id,
            t1.name,
            t1.chk_type 'chkType',
            t1.birth,
            t1.address,
            t1.file_path 'filePath',
            t1.reg_date 'regDate'
        FROM test t1
        LEFT JOIN test2 t2 ON t1.asf = t2.asf
        <where>
            <if test="srhIdOrName != null and srhIdOrName != ''">
                AND (name LIKE '%' || #{srhIdOrName} || '%'
                    OR id LIKE '%' || #{srhIdOrName} || '%')
            </if>
            <if test="srhStrDate != null and srhStrDate != ''">
                AND start_date &gt;= #{srhStrDate}
            </if>
            <if test="srhEndDate != null and srhEndDate != ''">
                AND end_date &lt;= #{srhEndDate}
            </if>
            <if test="srhDeptCode != null and srhDeptCode != ''">
                AND dept_code = #{srhDeptCode}
            </if>
            <if test="srhWorkCode != null and srhWorkCode != ''">
                AND work_code = #{srhWorkCode}
            </if>
        </where>
        ORDER BY id DESC
    </select>

</mapper>